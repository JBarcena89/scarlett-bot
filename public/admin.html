<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard de Scarlett ðŸ’¼</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #fff0f5; }
    h1 { color: #e91e63; }
    .stat { margin-bottom: 15px; font-size: 18px; }
  </style>
</head>
<body>
  <h1>EstadÃ­sticas de Scarlett ðŸ’–</h1>
  <div class="stat" id="users"></div>
  <div class="stat" id="clicks"></div>
  <div class="stat" id="byButton"></div>
  <div class="stat" id="bySource"></div>

  <script>
    const token = prompt("Ingresa tu token de administrador:");

    fetch(`/admin/dashboard?token=${token}`)
      .then(res => res.json())
      .then(data => {
        document.getElementById("users").textContent = `Usuarios totales: ${data.totalUsers}`;
        document.getElementById("clicks").textContent = `Clics totales: ${data.totalClicks}`;

        document.getElementById("byButton").innerHTML = "Clics por botÃ³n:<br>" + data.clicksByButton.map(c => `${c._id}: ${c.count}`).join("<br>");
        document.getElementById("bySource").innerHTML = "Usuarios por canal:<br>" + data.usersBySource.map(u => `${u._id}: ${u.count}`).join("<br>");
      })
      .catch(() => alert("Token incorrecto o error al cargar."));
  </script>
</body>
</html>
