const form = document.getElementById("chat-form"); const input = document.getElementById("user-input"); const chatBox = document.getElementById("chat-box"); function appendMessage(text, className) { const msg = document.createElement("div"); msg.className = className; msg.textContent = text; chatBox.appendChild(msg); chatBox.scrollTop = chatBox.scrollHeight; } form.addEventListener("submit", async (e) => { e.preventDefault(); const message = input.value.trim(); if (!message) return; appendMessage(message, "user-message"); input.value = ""; const typing = document.createElement("div"); typing.className = "scarlett-message"; typing.textContent = "Scarlett estÃ¡ escribiendo"; chatBox.appendChild(typing); let dots = 0; const interval = setInterval(() => { dots = (dots + 1) % 4; typing.textContent = "Scarlett estÃ¡ escribiendo" + ".".repeat(dots); }, 500); try { const res = await fetch("/chat", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ message }), }); const data = await res.json(); clearInterval(interval); chatBox.removeChild(typing); appendMessage(data.response, "scarlett-message"); } catch (err) { clearInterval(interval); chatBox.removeChild(typing); appendMessage("Ups... no puedo responder ahora bebÃ© ðŸ˜¢", "scarlett-message"); } });